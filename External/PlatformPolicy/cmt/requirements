package PlatformPolicy

# Force a dependency on GaudiPolicy so that it's tags are available.
use GaudiPolicy *

# Add a dependency against AtlasCommonPolicy so that the post_install action is defined.
# Note that in the long term, this dependency might need to be reversed if this package
# moves to DetCommon alongside AtlasCommonPolicy, and the tags defined by this package
# are adopted as common ATLAS tags (TDAQ & Offline)
use AtlasCommonPolicy AtlasCommonPolicy-*

apply_tag LCGCMT_INSTALLED

# Force an override of the tdaq-common policies
apply_tag block-tdaqc 

# New CMTCONFIG conventions

# ---------- Redhat 7.3 ----------

tag i686-rh73-gcc296          Linux redhat73 gcc-2.96.2 opt
tag i686-rh73-gcc296-opt      Linux redhat73 gcc-2.96.2 opt
tag i686-rh73-gcc296-dbg      Linux redhat73 gcc-2.96.2 debug
tag i686-rh73-gcc296-pro      Linux redhat73 gcc-2.96.2 opt profiled

tag i686-rh73-gcc295          Linux redhat73 gcc-2.95.2 opt
tag i686-rh73-gcc295-opt      Linux redhat73 gcc-2.95.2 opt
tag i686-rh73-gcc295-dbg      Linux redhat73 gcc-2.95.2 debug
tag i686-rh73-gcc295-pro      Linux redhat73 gcc-2.95.2 opt profiled

tag i686-rh73-gcc32           Linux redhat73 gcc-3.2 opt
tag i686-rh73-gcc32-opt       Linux redhat73 gcc-3.2 opt
tag i686-rh73-gcc32-dbg       Linux redhat73 gcc-3.2 debug
tag i686-rh73-gcc32-pro       Linux redhat73 gcc-3.2 opt profiled
tag redhat73&gcc-3.2 redhat73-gcc32

tag i686-rh73-icc80-opt       Linux redhat73 icc-8.0 opt
tag i686-rh73-icc80-dbg       Linux redhat73 icc-8.0 debug
tag i686-rh73-icc80-pro       Linux redhat73 icc-8.0 opt profiled
tag redhat73&icc-8.0 redhat73-icc80

tag i686-rh73-icc81-opt       Linux redhat73 icc-8.1 opt
tag i686-rh73-icc81-dbg       Linux redhat73 icc-8.1 debug
tag i686-rh73-icc81-pro       Linux redhat73 icc-8.1 opt profiled
tag redhat73&icc-8.1 redhat73-icc81

# ---------- CERN Enterprise Linux 3 ----------

tag i686-cel3-gcc323-opt      Linux cel3     gcc-3.2.3 opt
tag i686-cel3-gcc323-dbg      Linux cel3     gcc-3.2.3 debug
tag i686-cel3-gcc323-pro      Linux cel3     gcc-3.2.3 opt profiled
tag cel3&gcc-3.2.3 cel3-gcc323

tag i686-cel3-icc80-opt       Linux cel3     icc-8.0 opt
tag i686-cel3-icc80-dbg       Linux cel3     icc-8.0 debug
tag i686-cel3-icc80-pro       Linux cel3     icc-8.0 opt profiled
tag cel3&icc-8.0 cel3-icc80

tag i686-cel3-icc81-opt       Linux cel3     icc-8.1 opt
tag i686-cel3-icc81-dbg       Linux cel3     icc-8.1 debug
tag i686-cel3-icc81-pro       Linux cel3     icc-8.1 opt profiled
tag cel3&icc-8.1 cel3-icc81

tag cel3 slc3

# ---------- Scientific Linux CERN 3 ----------

tag i686-slc3-gcc323-opt      Linux slc3 32  gcc-3.2.3 opt   32 i686-slc3-gcc323
tag i686-slc3-gcc323-dbg      Linux slc3 32  gcc-3.2.3 debug 32 i686-slc3-gcc323
tag i686-slc3-gcc323-pro      Linux slc3 32  gcc-3.2.3 opt profiled
tag slc3&gcc-3.2.3 slc3-gcc323

tag i686-slc3-gcc344-opt      Linux slc3 32  gcc-3.4.4 opt
tag i686-slc3-gcc344-dbg      Linux slc3 32  gcc-3.4.4 debug
tag i686-slc3-gcc344-pro      Linux slc3 32  gcc-3.4.4 opt profiled
tag slc3&gcc-3.4.4 slc3-gcc344

tag gcc-3.2   gcc32  gcc32x gcc
tag gcc-3.2.3 gcc323 gcc32x gcc
tag gcc-3.4.4 gcc344 gcc34x gcc

tag i686-slc3-icc80-opt       Linux slc3 32  icc-8.0 opt
tag i686-slc3-icc80-dbg       Linux slc3 32  icc-8.0 debug
tag i686-slc3-icc80-pro       Linux slc3 32  icc-8.0 opt profiled
tag slc3&icc-8.0 slc3-icc80

tag i686-slc3-icc81-opt       Linux slc3 32  icc-8.1 opt
tag i686-slc3-icc81-dbg       Linux slc3 32  icc-8.1 debug
tag i686-slc3-icc81-pro       Linux slc3 32  icc-8.1 opt profiled
tag slc3&icc-8.1 slc3-icc81

# ---------- Scientific Linux CERN 4 ----------

tag i686-slc4-gcc345-opt      Linux slc4 32  gcc-3.4 opt
tag i686-slc4-gcc345-dbg      Linux slc4 32  gcc-3.4 debug

tag x86_64-slc4-gcc345-opt    Linux slc4 64  gcc-3.4 opt
tag x86_64-slc4-gcc345-dbg    Linux slc4 64  gcc-3.4 debug

tag i686-slc4-gcc34-opt       Linux slc4 32  gcc-3.4 opt   i686-slc4-gcc34
tag i686-slc4-gcc34-dbg       Linux slc4 32  gcc-3.4 debug i686-slc4-gcc34

tag x86_64-slc4-gcc34-opt     Linux slc4 64  gcc-3.4 opt   x86_64-slc4-gcc34
tag x86_64-slc4-gcc34-dbg     Linux slc4 64  gcc-3.4 debug x86_64-slc4-gcc34

tag i686-slc4-gcc41-opt       Linux slc4 32  gcc-4.1 opt   i686-slc4-gcc41
tag i686-slc4-gcc41-dbg       Linux slc4 32  gcc-4.1 debug i686-slc4-gcc41

tag x86_64-slc4-gcc41-opt     Linux slc4 64  gcc-4.1 opt   x86_64-slc4-gcc41
tag x86_64-slc4-gcc41-dbg     Linux slc4 64  gcc-4.1 debug x86_64-slc4-gcc41

tag i686-slc4-gcc43-opt       Linux slc4 32  gcc-4.3 opt   i686-slc4-gcc43
tag i686-slc4-gcc43-dbg       Linux slc4 32  gcc-4.3 debug i686-slc4-gcc43

tag x86_64-slc4-gcc43-opt     Linux slc4 64  gcc-4.3 opt   x86_64-slc4-gcc43
tag x86_64-slc4-gcc43-dbg     Linux slc4 64  gcc-4.3 debug x86_64-slc4-gcc43

tag slc4&gcc-3.4 slc4-gcc34
tag slc4&gcc-4.1 slc4-gcc41
tag slc4&gcc-4.3 slc4-gcc43

tag gcc-3.4 gcc34x gcc34 gcc
tag gcc-4.1 gcc41x gcc41 gcc
tag gcc-4.3 gcc43x gcc43 gcc

# Setup slc4 host tags from those provided by CMT. 
# Note that these need to be kept synchronized with the list in AtlasSetting.
tag slc44   host-slc4
tag slc45   host-slc4
tag slc46   host-slc4
tag slc47   host-slc4
tag slc48   host-slc4
tag slc49   host-slc4

tag sl43    host-slc4
tag sl44    host-slc4
tag sl45    host-slc4
tag sl46    host-slc4
tag sl47    host-slc4
tag sl48    host-slc4
tag sl49    host-slc4

tag rhel4   host-slc4
tag rhel43  host-slc4
tag rhel44  host-slc4
tag rhel45  host-slc4
tag rhel46  host-slc4
tag rhel47  host-slc4
tag rhel48  host-slc4
tag rhel49  host-slc4

# ---------- Scientific Linux CERN 5 ----------

tag i686-slc5-gcc34-opt       Linux slc5 32  gcc-3.4 opt   i686-slc5-gcc34
tag i686-slc5-gcc34-dbg       Linux slc5 32  gcc-3.4 debug i686-slc5-gcc34

tag i686-slc5-gcc41-opt       Linux slc5 32  gcc-4.1 opt   i686-slc5-gcc41
tag i686-slc5-gcc41-dbg       Linux slc5 32  gcc-4.1 debug i686-slc5-gcc41

tag x86_64-slc5-gcc41-opt     Linux slc5 64  gcc-4.1 opt   x86_64-slc5-gcc41
tag x86_64-slc5-gcc41-dbg     Linux slc5 64  gcc-4.1 debug x86_64-slc5-gcc41

tag i686-slc5-gcc43-opt       Linux slc5 32  gcc-4.3 opt   i686-slc5-gcc43
tag i686-slc5-gcc43-dbg       Linux slc5 32  gcc-4.3 debug i686-slc5-gcc43

tag x86_64-slc5-gcc43-opt     Linux slc5 64  gcc-4.3 opt   x86_64-slc5-gcc43
tag x86_64-slc5-gcc43-dbg     Linux slc5 64  gcc-4.3 debug x86_64-slc5-gcc43

tag x86_64-slc5-gcc45-opt     Linux slc5 64  gcc-4.5 opt   x86_64-slc5-gcc45
tag x86_64-slc5-gcc45-dbg     Linux slc5 64  gcc-4.5 debug x86_64-slc5-gcc45

tag x86_64-slc5-gcc46-opt     Linux slc5 64  gcc-4.6 opt   x86_64-slc5-gcc46
tag x86_64-slc5-gcc46-dbg     Linux slc5 64  gcc-4.6 debug x86_64-slc5-gcc46

tag x86_64-slc5-gcc47-opt     Linux slc5 64  gcc-4.7 opt   x86_64-slc5-gcc47
tag x86_64-slc5-gcc47-dbg     Linux slc5 64  gcc-4.7 debug x86_64-slc5-gcc47

tag x86_64-slc5-icc13-opt     Linux slc5 64  icc13 gcc46   opt   x86_64-slc5-icc13
tag x86_64-slc5-icc13-dbg     Linux slc5 64  icc13 gcc46   debug x86_64-slc5-icc13

tag slc5&gcc-3.4 slc5-gcc34
tag slc5&gcc-4.1 slc5-gcc41
tag slc5&gcc-4.3 slc5-gcc43
tag slc5&gcc-4.5 slc5-gcc45
tag slc5&gcc-4.6 slc5-gcc46

tag gcc-3.4 gcc34x gcc34 gcc
tag gcc-4.1 gcc41x gcc41 gcc
tag gcc-4.3 gcc43x gcc43 gcc
tag gcc-4.5 gcc45x gcc45 gcc
tag gcc-4.6 gcc46x gcc46 gcc
tag gcc-4.7 gcc47x gcc47 gcc
tag gcc-4.8 gcc48x gcc48 gcc
tag gcc-4.9 gcc49x gcc49 gcc

# Setup slc5 host tags from those provided by CMT. 
# Note that these need to be kept synchronized with the list in AtlasSetting.
tag slc50   host-slc5
tag slc51   host-slc5
tag slc52   host-slc5
tag slc53   host-slc5
tag slc54   host-slc5
tag slc55   host-slc5
tag slc56   host-slc5
tag slc57   host-slc5
tag slc58   host-slc5
tag slc59   host-slc5
tag slc510   host-slc5
tag slc511   host-slc5
tag slc512   host-slc5
tag slc513   host-slc5
tag slc514   host-slc5
tag slc515   host-slc5
tag slc516   host-slc5

tag rhel5   host-slc5
tag rhel50  host-slc5
tag rhel51  host-slc5
tag rhel52  host-slc5
tag rhel53  host-slc5
tag rhel54  host-slc5
tag rhel55  host-slc5
tag rhel56  host-slc5
tag rhel57  host-slc5
tag rhel58  host-slc5
tag rhel59  host-slc5
tag rhel510   host-slc5
tag rhel511   host-slc5
tag rhel512   host-slc5
tag rhel513   host-slc5
tag rhel514   host-slc5
tag rhel515   host-slc5
tag rhel516   host-slc5

tag sl50    host-slc5
tag sl51    host-slc5
tag sl52    host-slc5
tag sl53    host-slc5
tag sl54    host-slc5
tag sl55    host-slc5
tag sl56    host-slc5
tag sl57    host-slc5
tag sl58    host-slc5
tag sl59    host-slc5
tag sl510   host-slc5
tag sl511   host-slc5
tag sl512   host-slc5
tag sl513   host-slc5
tag sl514   host-slc5
tag sl515   host-slc5
tag sl516   host-slc5

# ---------- Scientific Linux CERN 6 ----------


tag i686-slc6-gcc43-opt       Linux slc6 32  gcc-4.3 opt   i686-slc6-gcc43
tag i686-slc6-gcc43-dbg       Linux slc6 32  gcc-4.3 debug i686-slc6-gcc43

tag i686-slc6-gcc47-opt       Linux slc6 32  gcc-4.7 opt   i686-slc6-gcc47
tag i686-slc6-gcc48-opt       Linux slc6 32  gcc-4.8 opt   i686-slc6-gcc48

tag x86_64-slc6-gcc43-opt     Linux slc6 64  gcc-4.3 opt   x86_64-slc6-gcc43
tag x86_64-slc6-gcc43-dbg     Linux slc6 64  gcc-4.3 debug x86_64-slc6-gcc43

tag x86_64-slc6-gcc45-opt     Linux slc6 64  gcc-4.5 opt   x86_64-slc6-gcc45
tag x86_64-slc6-gcc45-dbg     Linux slc6 64  gcc-4.5 debug x86_64-slc6-gcc45

tag x86_64-slc6-gcc46-opt     Linux slc6 64  gcc-4.6 opt   x86_64-slc6-gcc46
tag x86_64-slc6-gcc46-dbg     Linux slc6 64  gcc-4.6 debug x86_64-slc6-gcc46

tag x86_64-slc6-gcc47-opt     Linux slc6 64  gcc-4.7 opt   x86_64-slc6-gcc47
tag x86_64-slc6-gcc47-dbg     Linux slc6 64  gcc-4.7 debug x86_64-slc6-gcc47

tag x86_64-slc6-gcc48-opt     Linux slc6 64  gcc-4.8 opt   x86_64-slc6-gcc48
tag x86_64-slc6-gcc48-dbg     Linux slc6 64  gcc-4.8 debug x86_64-slc6-gcc48

tag x86_64-slc6-gcc49-opt     Linux slc6 64  gcc-4.9 opt   x86_64-slc6-gcc49
tag x86_64-slc6-gcc49-dbg     Linux slc6 64  gcc-4.9 debug x86_64-slc6-gcc49

tag x86_64-slc6-clang32-opt   Linux slc6 64  clang32 gcc46 opt   x86_64-slc6-clang32
tag x86_64-slc6-clang32-dbg   Linux slc6 64  clang32 gcc46 debug x86_64-slc6-clang32

tag x86_64-slc6-clang33-opt   Linux slc6 64  clang33 gcc48 opt   x86_64-slc6-clang33
tag x86_64-slc6-clang33-dbg   Linux slc6 64  clang33 gcc48 debug x86_64-slc6-clang33

tag x86_64-slc6-clang37-opt   Linux slc6 64  clang37 gcc49 opt   x86_64-slc6-clang337
tag x86_64-slc6-clang37-dbg   Linux slc6 64  clang37 gcc49 debug x86_64-slc6-clang37

tag x86_64-slc6-icc13-opt     Linux slc6 64  icc13 gcc46   opt   x86_64-slc5-icc13
tag x86_64-slc6-icc13-dbg     Linux slc6 64  icc13 gcc46   debug x86_64-slc5-icc13

tag slc6&gcc-4.3 slc6-gcc43
tag slc6&gcc-4.5 slc6-gcc45
tag slc6&gcc-4.6 slc6-gcc46

tag gcc-4.3 gcc43x gcc43 gcc
tag gcc-4.5 gcc45x gcc45 gcc
tag gcc-4.6 gcc46x gcc46 gcc

# Setup slc6 host tags from those provided by CMT. 

tag slc60   host-slc6
tag slc61   host-slc6
tag slc62   host-slc6
tag slc63   host-slc6
tag slc64   host-slc6
tag slc65   host-slc6
tag slc66   host-slc6
tag slc67   host-slc6
tag slc68   host-slc6
tag slc69   host-slc6
tag slc610   host-slc6
tag slc611   host-slc6
tag slc612   host-slc6
tag slc613   host-slc6
tag slc614   host-slc6
tag slc615   host-slc6
tag slc616   host-slc6

tag rhel6   host-slc6
tag rhel60  host-slc6
tag rhel61  host-slc6
tag rhel62  host-slc6
tag rhel63  host-slc6
tag rhel64  host-slc6
tag rhel65  host-slc6
tag rhel66  host-slc6
tag rhel67  host-slc6
tag rhel68  host-slc6
tag rhel69  host-slc6
tag rhel610  host-slc6
tag rhel611  host-slc6
tag rhel612  host-slc6
tag rhel613  host-slc6
tag rhel614  host-slc6
tag rhel615  host-slc6
tag rhel616  host-slc6


tag sl60    host-slc6
tag sl61    host-slc6
tag sl62    host-slc6
tag sl63    host-slc6
tag sl64    host-slc6
tag sl65    host-slc6
tag sl66    host-slc6
tag sl67    host-slc6
tag sl68    host-slc6
tag sl69    host-slc6
tag slc610   host slc6
tag slc611   host slc6
tag slc612   host slc6
tag slc613   host slc6
tag slc614   host slc6
tag slc615   host slc6
tag slc616   host slc6

# ------------------ Special Platform tags ------------

tag CERNDISTCC CERN distcc

# Setup overrides from SLES9
tag sles9 SLES9

# ---------- Mac OS X ----------

tag i386-mac105-gcc40-dbg Darwin i386-mac target-mac105 gcc-4.0 debug i386-osx105-gcc40
tag i386-mac105-gcc40-opt Darwin i386-mac target-mac105 gcc-4.0 opt   i386-osx105-gcc40
tag i386-mac106-gcc40-dbg Darwin i386-mac target-mac106 gcc-4.0 debug i386-osx106-gcc40 
tag i386-mac106-gcc40-opt Darwin i386-mac target-mac106 gcc-4.0 opt   i386-osx106-gcc40
tag i386-mac106-gcc42-dbg Darwin i386-mac target-mac106 gcc-4.2 debug i386-osx106-gcc42
tag i386-mac106-gcc42-opt Darwin i386-mac target-mac106 gcc-4.2 opt   i386-osx106-gcc42
tag x86_64-mac106-gcc42-dbg Darwin i386-mac target-mac106 gcc-4.2 debug x86_64-osx106-gcc42 64
tag x86_64-mac106-gcc42-opt Darwin i386-mac target-mac106 gcc-4.2 opt   x86_64-osx106-gcc42 64
tag mac105&gcc-4.0 mac105-gcc40
tag mac105 host-mac105
tag mac106 host-mac106

tag 32 target-32
tag 64 target-64

# gcc compatibility tags
# DRQ: I've commented this out for now since otherwise rh73_gcc32 will
#      mask out rh_gcc323 and libraries compiled with the latter tag will
#      not be accessible (or at least it'll be ambiguous which will be
#      used).
####tag gcc-3.2.3 gcc-3.2 gcc-3

tag gcc-2.95.2 gcc-2 gcc
tag gcc-3.2    gcc-3 gcc
tag gcc-3.2.3  gcc-3 gcc 
tag gcc-3.3    gcc-3 gcc
tag gcc-3.4    gcc-3 gcc

tag gcc-4.0    gcc-4 gcc
tag gcc-4.1    gcc-4 gcc
tag gcc-4.3    gcc-4 gcc

tag icc-8.0    icc-8 icc
tag icc-8.1    icc-8 icc

tag xlc-6.0    xlc-6 xlc

tag debug dbg

# Setup platform-specific linker flags 

# The notAsNeeded tag is designed to allow individual packages to override the asNeeded tag
# and is also applied globally for MacOSX and SLES9 since they don't support these linkopts
macro as_needed_macro "asNeeded" \
      notAsNeeded     "notAsNeeded" \
      Darwin          "asNeeded" \
      SLES9           "notAsNeeded"
apply_tag $(as_needed_macro)
