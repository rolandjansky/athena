package Rivet

author Andy Buckley <andy.buckley@cern.ch>
author James Monk <jmonk@hep.ucl.ac.uk>

use AtlasPolicy AtlasPolicy-*
use LCG_Configuration
use AtlasExternalArea          AtlasExternalArea-*     External
use AtlasHepMC                 AtlasHepMC-*            External
use AtlasGSL                   AtlasGSL-*              External
use YODA                       YODA-*                  External

## Uncomment line below to test with Rivet installation in /afs/.cern.ch
#macro LCG_ROOT "/afs/.cern.ch/sw/lcg"
#macro LCG_external "$(LCG_ROOT)/external"
#macro myLCG_config_version "67c"

#macro Rivet_home "$(LCG_external)/MCGenerators_lcgcmt$(myLCG_config_version)/rivet"
macro Rivet_home "$(LCG_external)/MCGenerators/rivet"
macro Rivet_version "2.4.1"
macro Rivet_native_version "$(Rivet_version)_lcgcmt$(LCG_config_version)"
macro Rivet_dir "$(Rivet_home)/$(Rivet_version)/$(LCG_ext_system)"
macro Rivet_lib "$(Rivet_dir)/lib"
macro Rivet_share "$(Rivet_dir)/share"
macro Rivet_bin "$(Rivet_dir)/bin"
macro Rivet_python "$(Rivet_dir)/lib/python${Python_version}/site-packages"
macro Rivet_texmf "$(Rivet_dir)/share/Rivet/texmf

macro Rivet_linkopts "-L$(Rivet_lib) -lRivet"

macro Rivet_export_paths "$(Rivet_dir)"
macro Rivet_follow_symlinks "y"

## Install libraries
apply_pattern declare_installed_libraries dir="$(Rivet_lib)"

## Install headers
#include_path none
include_path $(Rivet_dir)/include
include_dirs $(Rivet_dir)/include

## Install scripts
apply_pattern declare_scripts files=" -s=$(Rivet_bin) *"
path_prepend PATH "$(Rivet_bin)"

## Install Python modules
apply_pattern generic_declare_for_link kind=python_modules \
  files='-s=$(Rivet_python) * *.py *.so' prefix="$(CMTCONFIG)/lib/python$(Python_version)" name=rivet_pymodules
path_prepend PYTHONPATH "$(Rivet_python)"

## Set paths to find default plugins and data files
path_append RIVET_ANALYSIS_PATH "$(Rivet_share)"

## Set TeX environment for Rivet plotting
set colon ':'
path_prepend TEXMFHOME "$(Rivet_texmf)"
path_prepend TEXMFCNF "$(Rivet_texmf)/cnf"
path_prepend TEXINPUTS "$(Rivet_texmf)/tex"
path_prepend LATEXINPUTS "$(Rivet_texmf)/tex"

path_append TEXMFHOME $colon
path_append TEXMFCNF $colon
path_append TEXINPUTS $colon
path_append LATEXINPUTS $colon

macro Rivet_pp_cppflags "-isystem $(Rivet_dir)/include "
