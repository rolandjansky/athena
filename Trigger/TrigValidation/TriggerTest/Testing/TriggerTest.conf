# Configuration file for regression tests based on algorithm output
# - "test" keyword marks the start of a new test configuration
#   must be followed by an identifier that is unique in this file
# - test names must also be unique; tests can be refered to by name or number
# - indentation is optional but is recommended for clarity
# - white space is ignored
# - key words, on the left, must be lower case,
#   and exactly match to one of the known keywords
# - usually, any characters are valid for values, except white space
# - white space is a separater when multiple values are needed
# - except for regtest, if key words are repeated, the last one will override
#   the others
# - multiple regtest can be specified
# See example and documentation at end for more details

# tests for trigger QA and nightly builds
# see other conf files for more tests


test 1
  name pureNewSteering
  doc stand-alone test of the steering
  joboptions pureSteering_jobOptions.py
#   joboptions Trigger_topOptions_pureSteering.py
#  checklog --config check_log_pureSteering21_excludes.xml --showexcludestats
#  checklog
  regtest TrigSteer_L2.ResultBuilder REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/TrigSteer_L2.ResultBuilder.reference
  regtest TrigSteer_EF.ResultBuilder REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/TrigSteer_EF.ResultBuilder.reference
  pre_command get_files -jo Lvl1Results.txt

  
test 2
  name pureNewSteering_ecodes
  doc stand-alone test of the steering with useErrorHandlingMenu
  joboptions pureSteering_jobOptions.py
  athena_args -c useErrorHandlingMenu=True
#   joboptions Trigger_topOptions_pureSteering.py
#  checklog --config check_log_pureSteering21_excludes.xml --showexcludestats
#  checklog
  regtest TrigSteer_L2.ResultBuilder REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/ecodes_TrigSteer_L2.ResultBuilder.reference
  regtest TrigSteer_EF.ResultBuilder REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/ecodes_TrigSteer_EF.ResultBuilder.reference
#  pre_command get_files -jo Lvl1Results.txt

test 3
  name pureNewSteering_prescaling
  doc stand-alone test of the steering with the PrescaleMenu
  joboptions pureSteering_jobOptions.py
  athena_args -c "repeat=100; usePrescaleMenu=True"
#   joboptions Trigger_topOptions_pureSteering.py
#  checklog --config check_log_pureSteering21_excludes.xml --showexcludestats
#  checklog
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/prescaling_TrigSteer_HLT.ChainMoni.reference
#  pre_command get_files -jo Lvl1Results.txt

test 4
  name pureNewSteering_merged
  doc stand-alone test of the steering with runMergedSteering
  joboptions pureSteering_jobOptions.py
  athena_args -c 'runMergedSteering=True'
#  checklog --config check_log_pureSteering21_excludes.xml --showexcludestats
#  regtest TrigSteer_HLT.ResultBuilder REGTEST merged_TrigSteer_HLT.ResultBuilder.reference.new
  regtest TrigSteer_HLT.ResultBuilder REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/merged_TrigSteer_HLT.ResultBuilder.reference

test 5
  name AthenaTrigRDO
  doc Basic, standard, RecExCommon-based, read-RDO, run-trigger job. Reco disabled
  joboptions testAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  #fullregtest REGTEST testAthenaRDO_top.reference
  #regtest TrigSteer_L2.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigRDO_top_L2.TrigChainMoniValidation.reference
  #regtest TrigSteer_EF.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigRDO_top_EF.TrigChainMoniValidation.reference
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigRDO_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO.root 1
  post_command chainDump.py -n -S
  # add soft links so AthenaTrigRDO_leakcheck comparison will succeed.
  #post_command ln -s AthenaTrigRDO_top_L2.TrigChainMoniValidation.reference.new AthenaTrigRDO_top_L2.TrigChainMoniValidation.reference
  #post_command ln -s AthenaTrigRDO_top_EF.TrigChainMoniValidation.reference.new AthenaTrigRDO_top_EF.TrigChainMoniValidation.reference 
  post_command ln -s AthenaTrigRDO_top_HLT.TrigChainMoniValidation.reference.new AthenaTrigRDO_top_HLT.TrigChainMoniValidation.reference 
  pre_command RecExCommon_links.sh

test 6
  name AthenaTrigRDO_leakcheck
  doc --leak-check-execute, otherwise standare, REGTEST wrt AthenaTrigRDO
  joboptions testAthenaTrigRDO.py
  #this export of the LD_PRELOAD path somehow aint working in the perl-script so do it in the xml setup file now
  #athena_cmd athena.py
  athena_args --stdcmalloc --leak-check-execute -c "checkLeak=True"
  checklog --config checklogTriggerTest.conf --showexcludestats
  # these may fail ocassionally because AthenaTrigRDO_leakcheck is a different ATN group than AthenaTrigRDO.
  regtest TrigSteer_HLT.TrigChainMoniValidation  REGTEST ../AthenaTrigRDO/AthenaTrigRDO_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger ../AthenaTrigRDO/expert-monitoring.root
  checkcount ../AthenaTrigRDO/expert-monitoring.root 0
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 7
  name AthenaTrigRDOnoFPE
  doc standard trigger job no Floating Point Exceptions
  joboptions testAthenaTrigRDO.py
  athena_args -c 'AbortOnError="True"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 8
  name AthenaTrigRDO_StatusCodes
  doc standard trigger job, will crash on status codes
  joboptions testAthenaTrigRDO.py
  athena_args -c 'StatusCodeSvc.AbortOnError=True'
  checklog --config checklogTriggerTest.conf --showexcludestats
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 9
  name AthenaTrigRDO_Physics_pp_v5
  doc Physics_pp_v5
  joboptions testAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_Physics_pp_v5_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_Physics_pp_v5.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_Physics_pp_v5.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 10
  name AthenaTrigRDO_MC_pp_v5
  doc MC_pp_v5
  joboptions testAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_MC_pp_v5_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_MC_pp_v5.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_MC_pp_v5.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 11
  name standalone_LS1_v1
  doc LS1_v1 with runHLT_standalone.py
  joboptions TriggerRelease/runHLT_standalone.py
  #athena_args -c 'EvtMax=100;testLS1V1=True;setDetDescr="ATLAS-GEO-08-00-02";setGlobalTag="COMCOND-HLTP-002-00";useCOMCONDDB=True;BSRDOInput=["data10_7TeV.00152845.physics_MinBias.merge.RAW._lb0250._0002.1"]'   
  #athena_args -c 'EvtMax=10;testLS1V1=True;useCOMCONDDB=True;BSRDOInput=["data12_8TeV.00212967.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0291._SFO-5._0001.data"]' 
  #athena_args -c 'EvtMax=10;testLS1V1=True;useCOMCONDDB=True;BSRDOInput=["data12_8TeV.00202798.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0555._SFO-7._0001.data"]'   
  athena_args -c "jp.AthenaCommonFlags.EvtMax.set_Value_and_Lock(10);testLS1V1=True;useCOMCONDDB=True;BSRDOInput='root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data12_8TeV.00212967.physics_eb_zee_zmumu_cc._0001.data'"
  #BSRDOInput='root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data12_8TeV.00212967.physics_eb_zee_zmumu_cc._0001.data'
  checklog --config checklogTriggerTest.conf --showexcludestats
  #pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data12_8TeV.00212967.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0291._SFO-5._0001.data .
  #pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data12_8TeV.00202798.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0555._SFO-7._0001.data . 
  #post_command rm data12_8TeV.00212967.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0291._SFO-5._0001.data  
  #post_command rm data12_8TeV.00202798.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0555._SFO-7._0001.data
  post_command chainDump.py -n -S
  
test 12
  name AthenaTrigRDO_cosmic_default
  doc default cosmic menu with simple L1 calibration  
  joboptions testAthenaTrigRDO_cosmic_default.py
  athena_args -c 'menu="cosmic_default"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_cosmic_default_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_cosmic_default.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_cosmic_default.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 13
  name AthenaTrigBS_standalone
  doc TriggerRelease/runHLT_standalone.py
  joboptions TriggerRelease/runHLT_standalone.py
  checklog --config checklogTriggerTest.conf --showexcludestats
#  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaBS_standalone_top_CSC-01-02-00_BS.reference
  regtest TrigSteer_HLT.TrigChainMoniOnline REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigBS_standalone_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigBS_standalone.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigBS_standalone.root 1
  athena_args -c 'rerunLVL1=1;testPhysicsV5=True;BSRDOInput="root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data12_8TeV.00212967.physics_eb_zee_zmumu_cc._0001.data"'
#  check: incl.  HLTOutputLevel=DEBUG;doValidation=True --> also works
  pre_command RecExCommon_links.sh
#  pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data12_8TeV.00212967.physics_EnhancedBias.merge_eb_zee_zmumu_cc.RAW._lb0291._SFO-5._0001.data .
  post_command chainDump.py -n -S

test 14
  name AthenaTrigRDO_standalone
  doc Run job options  TriggerRelease/runHLT_standalone.py on Monte Carlo data
  joboptions testAthenaTrigRDO_standalone.py
  checklog --config checklogTriggerTest.conf --showexcludestats
#  athena_cmd  athena.py -c "testCurrentMenu=True;setupForMC=True;PoolRDOInput=['root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/mc11_7TeV.105200.T1_McAtNlo_Jimmy.digit.RDO.e835_s1272_s1274_d580_tid541908_00/RDO.541908._000001.pool.root.1']"
#  athena_args -c "testPhysicsV5=True;setupForMC=True;PoolRDOInput=['root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/mc11_7TeV.105200.T1_McAtNlo_Jimmy.digit.RDO.e835_s1272_s1274_d580_tid541908_00/RDO.541908._000001.pool.root.1']"  
  athena_args -c "testPhysicsV5=True;setupForMC=True;PoolRDOInput=['root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700_tid01177880_00/RDO.01177879._000001.pool.root.1']"
#  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_standalone_top_CSC-01-02-00_BS.reference
  regtest TrigSteer_HLT.TrigChainMoniOnline REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigRDO_standalone_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_standalone.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_standalone.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 15
  name standalone_cosmic
  doc cosmic slice with runHLT_standalone.py
  joboptions TriggerRelease/runHLT_standalone.py
  athena_args -c 'jp.AthenaCommonFlags.EvtMax.set_Value_and_Lock(10);testLS1V1=True;setDetDescr="ATLAS-GEO-16-00-01";BSRDOInput=["merge.RAW._lb0586._SFO-ALL._0001.1"]'
  checklog --config checklogTriggerTest.conf --showexcludestats
  pre_command   xrdcp  root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data11_7TeV.00177682.physics/merge.RAW._lb0586._SFO-ALL._0001.1 . 
  post_command rm merge.RAW._lb0586._SFO-ALL._0001.1 
  post_command chainDump.py -n -S

test 16
  name LVL1CTPAthenaTrigRDO
  doc Level1
  joboptions testLVL1CTPAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest CTPSimulation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/LVL1CTPAthenaTrigRDO_top_CTPSimulation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/LVL1CTPAthenaTrigRDO.root
  pre_command RecExCommon_links.sh
  
test 17
  name LVL1CTPCaloAthenaTrigRDO
  doc Level 1 with Calo
  joboptions testLVL1CTPCaloAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest CTPSimulation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/LVL1CTPCaloAthenaTrigRDO_top_CTPSimulation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/LVL1CTPCaloAthenaTrigRDO.root
  pre_command RecExCommon_links.sh
  
test 18
  name LVL1CTPMuonAthenaTrigRDO
  doc LVL1 with muons
  joboptions testLVL1CTPMuonAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest CTPSimulation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/LVL1CTPMuonAthenaTrigRDO_top_CTPSimulation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/LVL1CTPMuonAthenaTrigRDO.root
  pre_command RecExCommon_links.sh

#test 19
#  name CaloAthenaTrigRDO
#  doc Calo only HLT	
#  joboptions testCaloAthenaTrigRDO.py
#  checklog --config checklogTriggerTest.conf --showexcludestats
#  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/CaloAthenaTrigRDO_top.reference
#  pre_command RecExCommon_links.sh
#  post_command chainDump.py -n -S
  
test 20
  name IDAthenaTrigRDO
  doc runs ID 
  joboptions testIDAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/IDAthenaTrigRDO_top.reference
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 21
  name IDAthenaTrigRDO_preRTTtest
  doc checks ID RTT jo
  joboptions testIDAthenaTrigRDO_preRTTtest.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest    REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/IDAthenaTrigRDO_preRTTtest_top.reference
  pre_command RecExCommon_links.sh

test 22
  name ElectronSliceAthenaTrigRDO
  doc runs electron slice only on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="egamma"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/ElectronSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/ElectronSliceAthenaTrigRDO.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/ElectronSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 23
  name PhotonSliceAthenaTrigRDO
  doc runs photon slice only on top
  joboptions testPhotonSliceAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/PhotonSlice_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/PhotonSliceAthenaTrigRDO.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/PhotonSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 24
  name MuonSliceAthenaTrigRDO
  doc muon on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="muon"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/MuonSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MuonSliceAthenaTrigRDO.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MuonSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 25
  name JetSliceAthenaTrigRDO
  doc Jet slice on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="jet"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/JetSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/JetSliceAthenaTrigRDO.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/JetSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 26
  name TauSliceAthenaTrigRDO
  doc Tau on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="tau"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/TauSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/TauSliceAthenaTrigRDO.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/TauSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 27
  name METSliceAthenaTrigRDO
  doc MET slice on top  
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="met"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/METSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/METSliceAthenaTrigRDO.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/METSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 28
  name BphysicsSliceAthenaTrigRDO
  doc Bphysics on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="bphysics"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/BphysicsSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 29
  name BphysicsSliceAthenaTrigRDO_Kstar
  doc Bphysics on Bd_KstarMuMu -- currently off
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="bphysicskstar"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/BphysicsSliceAthenaTrigRDO_top_Kstar.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO_Kstar.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO_Kstar.root 1
  pre_command RecExCommon_links.sh
  athena_args -c 'from AthenaCommon.AthenaCommonFlags import athenaCommonFlags;athenaCommonFlags.FilesInput=["RDO.201489._000001.pool.root.1"]'
  pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/valid1.108519.PythiaB_Bs_phi_mu4mu4.digit.RDO.e598_s933_s946_d406_tid201489_00/RDO.201489._000001.pool.root.1 .
  post_command rm RDO.201489._000001.pool.root.1
  post_command chainDump.py -n -S

test 30
  name BjetSliceAthenaTrigRDO
  doc Bjet slice on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="bjet"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/BjetSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BjetSliceAthenaTrigRDO.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BjetSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 31
  name MinBiasSliceAthenaTrigRDO
  doc minbias slice, does not use top events
  #joboptions testMinBiasSliceAthenaTrigRDO.py
  joboptions testCommonSliceAthenaTrigRDO.py  
  #athena_args -c 'menu="Physics_pp_v5"'
  athena_args -c 'jp.AthenaCommonFlags.EvtMax.set_Value_and_Lock(1000) ; menu="Physics_pp_v5"; sliceName="minbias" ;  LVL1OutputLevel=DEBUG ; from AthenaCommon.AthenaCommonFlags import athenaCommonFlags as acf;acf.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/mc12_8TeV.119994.Pythia8_A2MSTW2008LO_minbias_inelastic.recon.RDO.e1119_a185_a187_tid00998581_00/RDO.00998581._000001.pool.root.1"]'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/MinBiasSliceAthenaTrigRDO.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MinBiasSliceAthenaTrigRDO.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MinBiasSliceAthenaTrigRDO.root 1
  #athena_cmd  athena.py -c 'PoolRDOInput=["RDO.044456._00001.pool.root.1"]'
  #athena_cmd  athena.py -c 'from AthenaCommon.AthenaCommonFlags import athenaCommonFlags;athenaCommonFlags.FilesInput=["RDO.044456._00001.pool.root.1"]'
  #athena_cmd  athena.py 
  #pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/valid1.105003.pythia_sdiff.digit.RDO.e380_s511_d159_tid044456/RDO.044456._00001.pool.root.1 .
  pre_command RecExCommon_links.sh
  #post_command rm RDO.044456._00001.pool.root.1
  post_command chainDump.py -n -S
  
test 32
  name AthenaXMLConfigRDO
  doc Run athena with XML menu - will fail if TriggerMenuXML build failed
  joboptions testAthenaXMLConfigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaXMLConfigRDO_top_HLT.TrigChainMoniValidation.reference
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 33
  name AthenaDBConfigRDO
  doc Trigger configured from DB
  # -- disabled right now see: https://savannah.cern.ch/bugs/?102522 and https://savannah.cern.ch/bugs/?102038
  joboptions testAthenaDBConfigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation  REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaDBConfigRDO_top_HLT.TrigChainMoniValidation.reference
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 34
  name AthenaXMLvsDBcompare
  # -- disabled right now see: https://savannah.cern.ch/bugs/?102522 and https://savannah.cern.ch/bugs/?102038
  doc Compare XML vs DB configuration
  athena_cmd compareXMLvsDBconfig.sh
  pre_condition test -s ../AthenaXMLConfigRDO/testAthenaXMLConfigRDO_test.log
  pre_condition test -s ../AthenaDBConfigRDO/testAthenaDBConfigRDO_test.log
  pre_condition egrep -q "CTPSimulation.*REGTEST" ../AthenaXMLConfigRDO/testAthenaXMLConfigRDO_test.log
  pre_condition egrep -q "CTPSimulation.*REGTEST" ../AthenaDBConfigRDO/testAthenaDBConfigRDO_test.log
 
test 35
  name AthenaTrigRDO_chainOrderAscend
  doc changes order of chains, based on AthenaTrigRDO
  joboptions testAthenaTrigRDO.py
  athena_args -c 'chainOrderOption=-1'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_chainOrderAscend_top_HLT.TrigChainMoniValidation.reference
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 36
  name AthenaTrigRDO_chainOrderDescend
  doc changes order of chains based on AthenaTrigRDO
  joboptions testAthenaTrigRDO.py
  athena_args -c 'chainOrderOption=1'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_chainOrderDescend_top_HLT.TrigChainMoniValidation.reference
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 37
  name AthenaTrigRDO_chainOrder_compare
  doc compare result of chainOrderAscend/Descend tests
  athena_cmd echo "Not running athena"
  pre_condition test -s ../AthenaTrigRDO_chainOrderAscend/expert-monitoring.root
  pre_condition test -s ../AthenaTrigRDO_chainOrderDescend/expert-monitoring.root
  # Checkcount and rootcomp between Ascend/Descend test
  post_command ln -s ../AthenaTrigRDO_chainOrderDescend/expert-monitoring.root
  checkcount ../AthenaTrigRDO_chainOrderAscend/expert-monitoring.root 0 BOTH
  rootcomp ../AthenaTrigRDO_chainOrderAscend/expert-monitoring.root ../AthenaTrigRDO_chainOrderDescend/expert-monitoring.root
  extra_failure_codes CHECKCOUNTS_FAILED
  
test 38
  name AthenaTrigRDO_L2EFMerging
  doc testing trigger results w/wo merging L2/EF, based on AthenaTrigRDO with run_standalone.py
  joboptions testAthenaL2EFMerging.py
  athena_args -c 'doHLT=True'
  checklog --config checklogTriggerTest.conf --showexcludestats
  checkmerge expert-monitoring.root 0	
  post_command chainDump.py -n -S

test 39
  name MySliceAthenaTrigRDO
  doc runs my slice only on top
  joboptions testMySliceAthenaTrigRDO.py
  checklog --config checklogTriggerTest.conf --showexcludestats
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S  
  
test 40
  name ElectronSliceAthenaTrigRDO_MC
  doc runs electron slice only on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="egamma"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/ElectronSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/ElectronSliceAthenaTrigRDO_MC.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/ElectronSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
 
test 41
  name MuonSliceAthenaTrigRDO_MC
  doc muon on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="muon"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/MuonSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MuonSliceAthenaTrigRDO_MC.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MuonSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 42
  name JetSliceAthenaTrigRDO_MC
  doc Jet slice on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="jet"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/JetSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/JetSliceAthenaTrigRDO_MC.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/JetSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 43
  name TauSliceAthenaTrigRDO_MC
  doc Tau on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="tau"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/TauSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/TauSliceAthenaTrigRDO_MC.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/TauSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 44
  name METSliceAthenaTrigRDO_MC
  doc MET slice on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="met"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/METSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/METSliceAthenaTrigRDO_MC.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/METSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 45
  name BphysicsSliceAthenaTrigRDO_MC
  doc Bphysics on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="bphysics"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/BphysicsSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO_MC.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 46
  name BphysicsSliceAthenaTrigRDO_Kstar_MC
  doc Bphysics on Bd_KstarMuMu -- currently off
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="bphysicskstar"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/BphysicsSliceAthenaTrigRDO_top_Kstar_MC.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO_Kstar_MC.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BphysicsSliceAthenaTrigRDO_Kstar_MC.root 1
  pre_command RecExCommon_links.sh
  athena_args -c 'from AthenaCommon.AthenaCommonFlags import athenaCommonFlags;athenaCommonFlags.FilesInput=["RDO.201489._000001.pool.root.1"]'
  pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/valid1.108519.PythiaB_Bs_phi_mu4mu4.digit.RDO.e598_s933_s946_d406_tid201489_00/RDO.201489._000001.pool.root.1 .
  post_command rm RDO.201489._000001.pool.root.1
  post_command chainDump.py -n -S

test 47
  name BjetSliceAthenaTrigRDO_MC
  doc Bjet slice on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="bjet"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/BjetSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BjetSliceAthenaTrigRDO_MC.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/BjetSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 48
  name MinBiasSliceAthenaTrigRDO_MC
  doc minbias slice, does not use top events
  #joboptions testMinBiasSliceAthenaTrigRDO.py
  joboptions testCommonSliceAthenaTrigRDO.py
  #athena_args -c 'menu="MC_pp_v5"'
  athena_args -c 'jp.AthenaCommonFlags.EvtMax.set_Value_and_Lock(1000) ; menu="MC_pp_v5"; sliceName="minbias" ; LVL1OutputLevel=DEBUG ; from AthenaCommon.AthenaCommonFlags import athenaCommonFlags as acf;acf.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/mc12_8TeV.119994.Pythia8_A2MSTW2008LO_minbias_inelastic.recon.RDO.e1119_a185_a187_tid00998581_00/RDO.00998581._000001.pool.root.1"]'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/MinBiasSliceAthenaTrigRDO_MC.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MinBiasSliceAthenaTrigRDO_MC.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MinBiasSliceAthenaTrigRDO_MC.root 1
  #athena_cmd  athena.py -c 'PoolRDOInput=["RDO.044456._00001.pool.root.1"]'
  #athena_cmd  athena.py -c 'from AthenaCommon.AthenaCommonFlags import athenaCommonFlags;athenaCommonFlags.FilesInput=["RDO.044456._00001.pool.root.1"]'
  #athena_cmd  athena.py 
  #pre_command xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/valid1.105003.pythia_sdiff.digit.RDO.e380_s511_d159_tid044456/RDO.044456._00001.pool.root.1 .
  pre_command RecExCommon_links.sh
  #post_command rm RDO.044456._00001.pool.root.1
  post_command chainDump.py -n -S
  
test 49
  name CombinedSliceAthenaTrigRDO
  doc Combined on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="Physics_pp_v5"; sliceName="combined"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/CombinedSliceAthenaTrigRDO_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/CombinedSliceAthenaTrigRDO.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/CombinedSliceAthenaTrigRDO.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 50
  name CombinedSliceAthenaTrigRDO_MC
  doc Combined on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'menu="MC_pp_v5"; sliceName="combined"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/CombinedSliceAthenaTrigRDO_MC_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/CombinedSliceAthenaTrigRDO_MC.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/CombinedSliceAthenaTrigRDO_MC.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

test 51
  name AthenaTrigRDO_DC14
  doc DC14
  joboptions testAthenaTrigRDO.py
  athena_args -c 'menu="DC14"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_DC14_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_DC14.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_DC14.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 52
  name AthenaTrigRDO_LS1_v1
  doc LS1_v1
  joboptions testAthenaTrigRDO.py
  athena_args -c 'menu="LS1_v1"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_LS1_v1_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_LS1_v1.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_LS1_v1.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 53
  name AthenaTrigRDO_DC14_tight_mc_prescale
  doc DC14_tight_mc_prescale
  joboptions testAthenaTrigRDO.py  
  athena_args -c 'menu="DC14_tight_mc_prescale"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigRDO_DC14_tight_mc_prescale_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_DC14_tight_mc_prescale.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_DC14_tight_mc_prescale.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 54
  name AthenaTrigRDO_DC14_loose_mc_prescale
  doc DC14_loose_mc_prescale
  joboptions testAthenaTrigRDO.py  
  athena_args -c 'menu="DC14_loose_mc_prescale"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaTrigRDO_DC14_loose_mc_prescale_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_DC14_loose_mc_prescale.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_DC14_loose_mc_prescale.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 55
  name AthenaTrigRDO_noFPE
  doc standard trigger job no Floating Point Exceptions
  joboptions testAthenaTrigRDO.py
  athena_args -c 'jp.Rec.doFloatingPointException=True;AbortOnError="True"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
  
test 56
  name AthenaTrigRDO_FPE
  doc standard trigger job Floating Point Exceptions
  joboptions testAthenaTrigRDO.py
  athena_args -c 'jp.Rec.doFloatingPointException=False'
  checklog --config checklogTriggerTest.conf --showexcludestats
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
  
test 57
  name AthenaTrigRDO_leakcheck_igprof
  #doc --leak-check-execute, otherwise standare, REGTEST wrt AthenaTrigRDO
  joboptions testAthenaTrigRDO.py
  athena_cmd  export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/lib:/afs/cern.ch/atlas/offline/external/libunwind/1.1/x86_64-slc6-gcc47-opt/lib;export PATH=${PATH}:/afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/bin; /afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/bin/igprof -mp -z -t python athena.py --stdcmalloc
  checklog --config checklogTriggerTest.conf --showexcludestats
#  these may fail ocassionally because AthenaTrigRDO_leakcheck is a different ATN group than AthenaTrigRDO.
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST ../AthenaTrigRDO/AthenaTrigRDO_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger ../AthenaTrigRDO/expert-monitoring.root
  checkcount ../AthenaTrigRDO/expert-monitoring.root 0
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
#  Analyse the igprof output and add output to test log file
  post_command  export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/lib; /afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/bin/igprof-analyse -d -v -g -r MEM_TOTAL igprof.mp.gz
#  Analyze the memory profile into an SQLite DB file
  post_command  export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/lib; /afs/cern.ch/atlas/offline/external/igprof/5.9.10/x86_64-slc6-gcc47-opt/bin/igprof-analyse --sqlite -d -v -g -r MEM_TOTAL igprof.mp.gz | sqlite3 igprof_memtotal.sql3
  
test 58
  name MinBiasSliceAthenaTrigRDO_Enhanced
  doc MinBias triggers configured by hand on top
  joboptions testCommonSliceAthenaTrigRDO.py
  athena_args -c 'sliceName="minbiasEnhanced" ; LVL1OutputLevel=DEBUG'
  checklog --config checklogTriggerTest.conf --showexcludestats
  fullregtest REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/MinBiasSliceAthenaTrigRDO_Enhanced_top.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MinBiasSliceAthenaTrigRDO_Enhanced.root
  checkcount  /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/MinBiasSliceAthenaTrigRDO_Enhanced.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S
  
test 59
  name AthenaTrigRDO_Physics_pp_v5_on_cosmics
  doc experimental setup for cosmics input file Physics_pp_v5_on_cosmics
  joboptions testAthenaTrigRDO.py
  athena_args -c 'jp.AthenaCommonFlags.EvtMax.set_Value_and_Lock(10);menu="Physics_pp_v5";from AthenaCommon.AthenaCommonFlags import athenaCommonFlags as acf;acf.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/data14_cos.00239728.physics_CosmicMuons.merge.RAW._lb0168._SFO-10._0001.1"];useCONDBR2=True;setGlobalTag="CONDBR2-HLTP-2014-00";from TrkDetDescrSvc.TrkDetDescrJobProperties import TrkDetFlags; TrkDetFlags.MaterialVersion=18;setDetDescr="ATLAS-R2-2015-01-01-00"'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_Physics_pp_v5_on_cosmics_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_Physics_pp_v5_on_cosmics.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_Physics_pp_v5_on_cosmics.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S


test 60
  name AthenaTrigRDO_Physics_HI_v3
  doc Physics_HI_v3
  joboptions testAthenaTrigRDO.py
  athena_args -c 'jp.AthenaCommonFlags.EvtMax.set_Value_and_Lock(10);menu="Physics_HI_v3";from AthenaCommon.AthenaCommonFlags import athenaCommonFlags as acf;acf.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/trig-daq/validation/test_data/mc10_7TeV.119113.Hijing_PbPb_2p75TeV_MinBias_Flow_JJV2.digit.RDO.e844_s1345_s1300_d592_tid526760_00/RDO.526760._000001.pool.root.1"]'
  checklog --config checklogTriggerTest.conf --showexcludestats
  regtest TrigSteer_HLT.TrigChainMoniValidation REGTEST /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/REG/latest/AthenaRDO_Physics_HI_v3_top_HLT.TrigChainMoniValidation.reference
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_Physics_HI_v3.root
  checkcount /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/HIST/latest/AthenaTrigRDO_Physics_HI_v3.root 1
  pre_command RecExCommon_links.sh
  post_command chainDump.py -n -S

# Example/documentation
test 0 # must have a unique id

  # name must also be unique, and should be meaningful
  # if not specified, will default to test_<id>
  name demo_only

  # comment this out to enable the test
  disable

  # Input data file for the job
  # This is optional - you can omit it and provide a data file by hand
  # Will be linked to ZEBRA.P in the run directory by default,
  # otherwise specify name of link as second argument, separated by a space
  # An attempt will be made to expand environment variables of the form ${ENV}
  # in the name of the data file, from those in the shell from which you call
  # the test script and those set by cmt setup.
  datafile /afs/cern.ch/atlas/offline/data/testfile/dc1.001003.simul.redig.00001.test.h130_2e2mu_extract.zebra
  # another example, using environment variable
  #datafile ${ATLASTESTDATA}/dc1.001003.simul.redig.00001.test.h130_2e2mu_extract.zebra
  # another example, with a non-default link name:
  # datafile /afs/cern.ch/atlas/offline/data/testfile/some_bytestream_file RawEvent.re

  # name of joboptions file - NB it is mandatory to specify this
  # named file will be copied with get_files and modified
  joboptions testIDtransBS_Flags.py

  # run the checklog script on the log file produced by this job
  checklog
  # optional checklog arguments can be given, e.g. to specify alternative
  # config file for 'excludes' list, to add the option to print table of
  # exclusion counts, etc.
  # unusually, spaces are retained as part of the options up to end of line
  # checklog --config ../Testing/check_log_idexcludes.conf --showexcludestats

  # regtest specifies an algorithm name, a pattern that log lines from
  #this algorithm will be matched to, and the name of a reference file to
  #compare these lines with:
  regtest IdScan_IdScanMain_1_L2 REGTEST idscan.reference
  # you can specify multiple regtest lines, all will be checked
  # reference files are assumed to be in the directory ../reference/

  # fullregtest is like regtest but it
  # applies to the whole job, not just one algorithm. The arguments
  # specify a pattern that log lines from the full log will be matched to, 
  # and the name of a reference file to compare these lines with:
  fullregtest REGTEST full.reference
  # reference files are assumed to be in the directory ../reference/
  # it only makes sense once per event for a given pattern.

  # rootcomp
  # runs the rootcomp.py script on the expert-monitoring.root file and
  # the reference file given as an argument
  # https://twiki.cern.ch/twiki/bin/view/Atlas/TrigValTools#rootcomp_py
  rootcomp /afs/cern.ch/atlas/project/trigger/pesa-sw/validation/references/ATN/latest/atn_102.root

  # pre_command is used to specify a command that must be run before athena
  # unusually, spaces are retained as part of the command up to end of line
  # e.g. remove a file, stage a file
  # can give multiple shell commands by using ; between them
  # can give multiple pre_command lines
  pre_command test -f RawEvent.re && rm -f RawEvent.re
  pre_command RecExCommon_links.sh

  # post_command is used to specify a command that must be run after athena
  # it will be run from the run directory in which the job was run
  # and $packagedir can be used to indicate the top dir of the package.
  # unusually, spaces are retained as part of the command up to end of line
  # e.g. remove a file, stage a file
  # can give multiple shell commands by using ; between them
  # can give multiple post_command lines
  post_command $packagedir/Testing/vmem.sh

  # override default athena command, athena.py -bs
  # unusually, spaces are retained as part of the command up to end of line
  athena_cmd athenaMT

  # add extra athena options, will be included in athena.py command line
  # unusually, spaces are retained as part of the command up to end of line
  athena_args -c onlyMuon=True

