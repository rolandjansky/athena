<?xml version="1.0"?>
<!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

<unifiedTestConfiguration>
  <atn>
  </atn>
  <kv>
  </kv>

  <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt">

    <rttContactPerson>Antonio Limosani (antonio.limosani@sydney.edu.au)</rttContactPerson>
    <refRelease>15.5.0</refRelease>

    <jobList>

      <classification>
        <displayClass>OfflineValidation</displayClass>
        <displayProcess>Reco</displayProcess>
        <displayComponent>Det-Combined</displayComponent>
      </classification>

      <jobTransform userJobId="system_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40">
	<doc>Reco_tf runs on 13TeV collision mc ttbar 25 ns</doc>
	<jobTransformJobName>system_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.110401.PowhegPythia_P2012_ttbar_nonallhad.recon.RDO.e3099_s2578_r6220_tid05191878_00/RDO.05191878._000121.pool.root.1 --maxEvents 100 --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;rec.doTrigger=False;rec.doForwardDet=False;rec.doInDet=True;rec.doMuon=True;rec.doCalo=True;rec.doEgamma=False;rec.doMuonCombined=False;rec.doJetMissingETTag=False;rec.doTau=False;from RecExConfig.RecAlgsFlags import recAlgs;recAlgs.doMuonSpShower=False;rec.doBTagging=False;recAlgs.doEFlow=False;recAlgs.doEFlowJet=False;recAlgs.doMissingET=False;recAlgs.doMissingETSig=False; from JetRec.JetRecFlags import jetFlags;jetFlags.Enabled=False;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>

      <jobTransform userJobId="combined_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40">
	<doc>Reco_tf runs on 13TeV collision mc ttbar 25 ns</doc>
	<jobTransformJobName>combined_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.110401.PowhegPythia_P2012_ttbar_nonallhad.recon.RDO.e3099_s2578_r6220_tid05191878_00/RDO.05191878._000121.pool.root.1 --maxEvents 100 --outputESDFile myESD.pool.root  --outputAODFile myAOD.pool.root --preExec='rec.doTrigger=False;rec.doMonitoring=False;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>


      <jobTransform userJobId="monitoring_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40">
	<doc>Reco_tf runs on 13TeV collision mc ttbar 25 ns</doc>
	<jobTransformJobName>monitoring_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.110401.PowhegPythia_P2012_ttbar_nonallhad.recon.RDO.e3099_s2578_r6220_tid05191878_00/RDO.05191878._000121.pool.root.1 --maxEvents 100 --outputESDFile myESD.pool.root  --outputAODFile myAOD.pool.root --preExec='rec.doTrigger=False;rec.doMonitoring=True;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>

      <jobTransform userJobId="monitoring_reco_data12_jettauetmiss">
	<doc>Reco_tf runs on 8TeV collision 8 data from the jettauetmiss stream</doc>
	<jobTransformJobName>monitoring_reco_data12_jettauetmiss</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents 150 --outputESDFile myESD.pool.root  --outputAODFile myAOD.pool.root --preExec='rec.doTrigger=False;rec.doMonitoring=True;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>

      <jobTransform userJobId="monitoring_reco_data12_egamma">
	<doc>Reco_tf runs on 8TeV collision data from the egamma stream</doc>
	<jobTransformJobName>monitoring_reco_data12_egamma</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/data12_8TeV/data12_8TeV.00209109.physics_Egamma.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents 150 --outputESDFile myESD.pool.root  --outputAODFile myAOD.pool.root --preExec='rec.doTrigger=False;rec.doMonitoring=True;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>

      <jobTransform userJobId="monitoring_reco_data12_muons">
	<doc>Reco_tf runs on 8TeV collision 8 data from the muons stream</doc>
	<jobTransformJobName>monitoring_reco_data12_muons</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/data12_8TeV/data12_8TeV.00209109.physics_Muons.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents 150 --outputESDFile myESD.pool.root  --outputAODFile myAOD.pool.root --preExec='rec.doTrigger=False;rec.doMonitoring=True;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>


      <jobTransform userJobId="systemtrigger_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40">
	<doc>Reco_tf runs on 13TeV collision mc ttbar 25 ns</doc>
	<jobTransformJobName>systemtrigger_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.110401.PowhegPythia_P2012_ttbar_nonallhad.recon.RDO.e3099_s2578_r6220_tid05191878_00/RDO.05191878._000121.pool.root.1 --maxEvents 100 --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;rec.doTrigger=True;rec.doForwardDet=False;rec.doInDet=True;rec.doMuon=True;rec.doCalo=True;rec.doEgamma=False;rec.doMuonCombined=False;rec.doJetMissingETTag=False;rec.doTau=False;from RecExConfig.RecAlgsFlags import recAlgs;recAlgs.doMuonSpShower=False;rec.doBTagging=False;recAlgs.doEFlow=False;recAlgs.doEFlowJet=False;recAlgs.doMissingET=False;recAlgs.doMissingETSig=False; from JetRec.JetRecFlags import jetFlags;jetFlags.Enabled=False;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>

      <jobTransform userJobId="trigger_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40">
	<doc>Reco_tf runs on 13TeV collision mc ttbar 25 ns</doc>
	<jobTransformJobName>trigger_reco_mc15_ttbar_valid_13tev_25ns_mu00_to_mu40</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.110401.PowhegPythia_P2012_ttbar_nonallhad.recon.RDO.e3099_s2578_r6220_tid05191878_00/RDO.05191878._000121.pool.root.1 --maxEvents 100 --outputESDFile myESD.pool.root  --outputAODFile myAOD.pool.root --preExec='rec.doTrigger=True;rec.doMonitoring=True;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>

    </jobList>
    
    <jobGroups>

      <jobGroup name="TrfRecPerf" parent="Transform">
	<!-- keep everything which is not huge -->
        <keepFilePattern>*.pmon.gz</keepFilePattern>
        <keepFilePattern>*.log</keepFilePattern>
        <keepFilePattern>*.xml</keepFilePattern>
        <keepFilePattern>*.py</keepFilePattern>
        <keepFilePattern>*.pdf</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.png</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.ascii</keepFilePattern>
        <keepFilePattern>last*</keepFilePattern>
        <keepFilePattern>*pickle</keepFilePattern>
        <keepFilePattern>jobReport*</keepFilePattern>
        <keepFilePattern>runargs*</keepFilePattern>
        <keepFilePattern>ntuple*perfmon*</keepFilePattern>
        <keepFilePattern>pmb-callgrind*log</keepFilePattern>
        <keepFilePattern>callgrind*bz2</keepFilePattern>
	<keepFilePattern>log.RAWtoESD</keepFilePattern>
	<keepFilePattern>log.ESDtoAOD</keepFilePattern>
      </jobGroup>


      <jobGroup name="TrfRecPerf_NoCheckFile_PerfMon" parent="TrfRecPerf">
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple_RAW*.pmon.gz</argvalue>
          </arg>
        </test>

        <testToRemove>
          <jobGroupName>Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
        </testToRemove>
      </jobGroup>


      <jobGroup name="TrfRecPerf_NoCheckFile_NoPerfMon" parent="TrfRecPerf">
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple_RAW*.pmon.gz</argvalue>
          </arg>
        </test>

        <testToRemove>
          <jobGroupName>Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
          </testToRemove>
      </jobGroup>


      <jobGroup name="TrfRecPerf_CheckFile_PerfMon" parent="TrfRecPerf">
	<keepFilePattern>*.root</keepFilePattern>
	<keepFilePattern>*.pmon.gz</keepFilePattern>
	<keepFilePattern>*.log</keepFilePattern>
        <!--test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple*perfmon.gz</argvalue>
          </arg>
        </test-->

      </jobGroup>

    </jobGroups>

  </rtt>
</unifiedTestConfiguration>
